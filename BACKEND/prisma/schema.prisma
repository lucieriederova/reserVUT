generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Role {
  STUDENT
  CEO
  GUIDE
  HEAD_ADMIN
}

model User {
  id           String         @id @default(uuid())
  vutId        String         @unique
  email        String         @unique
  role         Role           @default(STUDENT)
  isVerified   Boolean        @default(false)
  reservations Reservation[]
  canceledLogs AuditLog[]     @relation("AdminCanceled")
  createdAt    DateTime       @default(now())
}

model Reservation {
  id            String   @id @default(uuid())
  roomName      String
  startTime     DateTime
  endTime       DateTime
  priorityLevel Int
  type          String   
  
  user          User     @relation(fields: [userId], references: [id])
  userId        String
  
  createdAt     DateTime @default(now())
}

model AuditLog {
  id                 String   @id @default(uuid())
  action             String
  canceledBookingId  String
  reason             String
  
  performedBy        User     @relation("AdminCanceled", fields: [adminId], references: [id])
  adminId            String
  
  timestamp          DateTime @default(now())
}